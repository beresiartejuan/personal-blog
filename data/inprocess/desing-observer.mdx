---
title: "Patrones de dise침o en Typescript: Observer"
date: "2022-10-28"
tags:
    - "typescript"
    - "desing-patterns"
    - "observer"
---

## 쯈ue es el patr칩n de dise침o Observer?

El patr칩n observer se enfoca en implementar mecanismos de subscripci칩n. Todo esto con el fin de que varios objetos se puedan enterar del cambio de estado de otro.

### 쮺omo funciona?

Como vemos en la siguiente imagen, tenemos una clase **ConcreteSubject** que tiene varios metodos: Un metodo para **attach** para agregar un observador, otro llamado **detach** para elminiar un observador, otra llamado **notify** que se encarga de notificar a todos los observadores que el objeto ha cambiado y los respectivos metodos de **getState** y **setState** permiten alterar el estado de la clase desde afuera de ella.

Por otro lado, los observadores tienen un metodo **update** que se manda a llamar cuando el **ConcreteSubject** llama a **notify**. Pero esto se puede cambiar( como veremos m치s adelante ).

![Diagrama uml del patr칩n Observer](/observer-method-es.png)

### Implementado Observer en Typescript

Supongamos que tenemos varios usuarios editando una lista. Tanto los usarios como la lista y los items de esta lista van a estar representados por objetos.

### 游늬 Los items

```typescript
class Item {

    private id: string;
    public text: string;

    constructor(text){
        this.text = text;
    }

    setId(id: string){
        this.id = id;
    }

    getId(): string {
        return this.id;
    }

}

```

### 游듺 La lista

```typescript

class Lista {

    public content: Item[] = [];

    public addItem(item: Item){
        this.content.push(item);
    }

    public updateItem(item: Item){
        this.content = this.content.map(item_value => 
            item.getId() == item_value.getId() ? item : item_value;
        )
    }

    public deleteItem(item: Item){
        this.content = this.content.filter(item_value =>
            item_value.getId() !== item.getId()
        )
    }

}

```

### 游븸游낗 Los usuarios

```typescript

let aux = 0;

class User {

    public name: string;
    private lista: Lista;

    constructor(lista: Lista){
        this.notas = lista;
    }

    addNota(nota: string){
        const item = new Item(nota);
        item.setId(aux.toString());
        aux++;
        this.notas.addItem(item);
    }

}
```